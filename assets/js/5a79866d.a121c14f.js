"use strict";(self.webpackChunkdot_net_from_zero_by_soheil_karami=self.webpackChunkdot_net_from_zero_by_soheil_karami||[]).push([[7713],{4819:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Contents/Session2/Code-Smells","title":"Code Smells Snapshot","description":"\ud83d\udd39 What is a Code\xa0Smell?","source":"@site/docs/Contents/Session2/02-Code-Smells.md","sourceDirName":"Contents/Session2","slug":"/Contents/Session2/Code-Smells","permalink":"/DotNet-From-Zero-by-Soheil-Karami/docs/Contents/Session2/Code-Smells","draft":false,"unlisted":false,"editUrl":"https://github.com/sohilww/DotNet-From-Zero-by-Soheil-Karami/blob/main/docs/Contents/Session2/02-Code-Smells.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Code Smells Snapshot"},"sidebar":"tutorialSidebar","previous":{"title":"Why Good Design Matters","permalink":"/DotNet-From-Zero-by-Soheil-Karami/docs/Contents/Session2/Why-Good-Design-Matters"},"next":{"title":"SOLID Principles","permalink":"/DotNet-From-Zero-by-Soheil-Karami/docs/Contents/Session2/SOLID-Principles"}}');var t=s(4848),i=s(8453);const l={title:"Code Smells Snapshot"},o="Code Smells Snapshot",a={},c=[{value:"\ud83d\udd39 What is a Code\xa0Smell?",id:"-what-is-a-codesmell",level:2},{value:"\ud83d\udd39 Three Common Smells",id:"-three-common-smells",level:2},{value:"1. <strong>God\xa0Class\u202f/\u202fGod\xa0Method</strong>",id:"1-godclassgodmethod",level:3},{value:"Problem Example",id:"problem-example",level:4},{value:"Technique \u2014 Extract\xa0Class\u202f/\u202fExtract\xa0Method",id:"technique--extractclassextractmethod",level:4},{value:"Refactored",id:"refactored",level:4},{value:"2. <strong>Shotgun\xa0Surgery</strong>",id:"2-shotgunsurgery",level:3},{value:"Problem Sketch",id:"problem-sketch",level:4},{value:"Technique \u2014 Introduce\xa0Policy\u202f/\u202fStrategy",id:"technique--introducepolicystrategy",level:4},{value:"Refactored",id:"refactored-1",level:4},{value:"3. <strong>Magic Numbers\u202f/\u202fStrings</strong>",id:"3-magic-numbersstrings",level:3},{value:"Problem Example",id:"problem-example-1",level:4},{value:"Technique \u2014 Replace Magic Constant with Named Constant\u202f/\u202fEnum",id:"technique--replace-magic-constant-with-named-constantenum",level:4},{value:"Refactored",id:"refactored-2",level:4},{value:"\ud83e\uddf9 Clean Code Tips",id:"-clean-code-tips",level:2}];function d(e){const n={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"code-smells-snapshot",children:"Code Smells Snapshot"})}),"\n",(0,t.jsx)(n.h2,{id:"-what-is-a-codesmell",children:"\ud83d\udd39 What is a Code\xa0Smell?"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"code\xa0smell"})," is a surface indication that usually corresponds to a deeper problem in the system.",(0,t.jsx)(n.br,{}),"\n","\u2014\u202fMartin\u202fFowler"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Smells don\u2019t always break your code immediately, but the longer they linger, the ",(0,t.jsx)(n.strong,{children:"maintenance cost"})," and ",(0,t.jsx)(n.strong,{children:"risk of defects"})," go up."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-three-common-smells",children:"\ud83d\udd39 Three Common Smells"}),"\n",(0,t.jsxs)(n.h3,{id:"1-godclassgodmethod",children:["1. ",(0,t.jsx)(n.strong,{children:"God\xa0Class\u202f/\u202fGod\xa0Method"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["A single class or method that tries to ",(0,t.jsx)(n.strong,{children:"do everything."})]}),"\n",(0,t.jsx)(n.li,{children:"Symptoms: thousands of lines, many responsibilities, frequent changes."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"problem-example",children:"Problem Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public class OrderProcessor\n{\n    public void Process(int orderId)\n    {\n        // 1) Data\u202fAccess\n        var order = db.Orders.Find(orderId);\n\n        // 2) Business\u202fRules\n        var total = order.Items.Sum(i => i.Price);\n\n        // 3) Payment Gateway\n        payment.Pay(order.Customer, total);\n\n        // 4) Presentation + Email\n        var html = $"<h1>Invoice #{orderId}</h1><p>Total: {total}</p>";\n        mail.Send(order.CustomerEmail, "Your invoice", html);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"technique--extractclassextractmethod",children:"Technique \u2014 Extract\xa0Class\u202f/\u202fExtract\xa0Method"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"What is it?"})," Break a large class or method into smaller, focused units.\n",(0,t.jsx)(n.strong,{children:"Target problem:"})," Too many responsibilities in one place.\n",(0,t.jsx)(n.strong,{children:"Benefit:"})," Better readability, isolated change, easier unit testing."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"refactored",children:"Refactored"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class OrderService\n{\n    private readonly IOrderRepository repo;\n    private readonly PaymentService payment;\n    private readonly InvoiceMailer mailer;\n\n    public OrderService(IOrderRepository repo,\n                        PaymentService payment,\n                        InvoiceMailer mailer)\n    {\n        this.repo = repo;\n        this.payment = payment;\n        this.mailer = mailer;\n    }\n\n    public void Process(int orderId)\n    {\n        var order  = repo.Get(orderId);\n        var total  = order.CalculateTotal();\n        payment.Pay(order.Customer, total);\n        mailer.SendInvoice(order, total);\n    }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udfe8 ",(0,t.jsx)(n.strong,{children:"Questions for students"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Which responsibilities were extracted and into what classes?"}),"\n",(0,t.jsx)(n.li,{children:"How does this refactor improve testability?"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udfe6 ",(0,t.jsx)(n.strong,{children:"Practice"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Take a \u201cdo\u2011everything\u201d method from a sample project and split it into at least ",(0,t.jsx)(n.strong,{children:"three"})," smaller classes or methods, each with a single responsibility."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h3,{id:"2-shotgunsurgery",children:["2. ",(0,t.jsx)(n.strong,{children:"Shotgun\xa0Surgery"})]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"A single logical change requires edits in many unrelated files\u2014often due to tight coupling or scattered duplication."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"problem-sketch",children:"Problem Sketch"}),"\n",(0,t.jsxs)(n.p,{children:["Imagine a ",(0,t.jsx)(n.strong,{children:"tax calculation rule"})," duplicated across ",(0,t.jsx)(n.code,{children:"CheckoutService"}),", ",(0,t.jsx)(n.code,{children:"InvoiceGenerator"}),", and ",(0,t.jsx)(n.code,{children:"ReportBuilder"}),". Any rule change forces edits in all three files."]}),"\n",(0,t.jsx)(n.h4,{id:"technique--introducepolicystrategy",children:"Technique \u2014 Introduce\xa0Policy\u202f/\u202fStrategy"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"What is it?"})," Centralize a varying rule behind an interface or strategy class.\n",(0,t.jsx)(n.strong,{children:"Target problem:"})," Logic scattered across multiple files.\n",(0,t.jsx)(n.strong,{children:"Benefit:"})," One\u2011stop change, lower coupling, clearer dependencies."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"refactored-1",children:"Refactored"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public interface ITaxPolicy\n{\n    decimal Calculate(decimal netPrice);\n}\n\npublic class DefaultTaxPolicy : ITaxPolicy\n{\n    public decimal Calculate(decimal netPrice) => netPrice * 0.09m;\n}\n\npublic class CheckoutService\n{\n    private readonly ITaxPolicy tax;\n    public CheckoutService(ITaxPolicy tax) => this.tax = tax;\n\n    public decimal GetTotal(decimal net) => net + tax.Calculate(net);\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udfe8 ",(0,t.jsx)(n.strong,{children:"Questions for students"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["How does introducing ",(0,t.jsx)(n.code,{children:"ITaxPolicy"})," reduce Shotgun\xa0Surgery?"]}),"\n",(0,t.jsx)(n.li,{children:"Which SOLID principle is applied here?"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udfe6 ",(0,t.jsx)(n.strong,{children:"Practice"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Locate duplicated logic across two or more methods/classes in a code snippet.",(0,t.jsx)(n.br,{}),"\n","Consolidate it behind a single strategy or helper class and update the consumers."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h3,{id:"3-magic-numbersstrings",children:["3. ",(0,t.jsx)(n.strong,{children:"Magic Numbers\u202f/\u202fStrings"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Hard\u2011coded constants with no descriptive name."}),"\n",(0,t.jsx)(n.li,{children:"Makes code harder to read, reuse, or update safely."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"problem-example-1",children:"Problem Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'if (discountCode == "S3")\n{\n    price *= 0.85; // 15\u202f% off\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"technique--replace-magic-constant-with-named-constantenum",children:"Technique \u2014 Replace Magic Constant with Named Constant\u202f/\u202fEnum"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"What is it?"})," Give each \u201cmystery\u201d value a descriptive name.\n",(0,t.jsx)(n.strong,{children:"Target problem:"})," Unknown meaning, copy\u2011paste errors.\n",(0,t.jsx)(n.strong,{children:"Benefit:"})," Self\u2011documenting code, single\u2011point change for each constant."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"refactored-2",children:"Refactored"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public static class DiscountCodes\n{\n    public const string Seasonal2025 = "S3";\n}\n\nif (discountCode == DiscountCodes.Seasonal2025)\n{\n    price *= 0.85m;\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udfe8 ",(0,t.jsx)(n.strong,{children:"Questions for students"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Why is using ",(0,t.jsx)(n.code,{children:"DiscountCodes.Seasonal2025"})," safer than the raw string?"]}),"\n",(0,t.jsx)(n.li,{children:"How would you extend this design if many discount types exist?"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udfe6 ",(0,t.jsx)(n.strong,{children:"Practice"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Replace all magic constants in a small code sample with named constants or enums.",(0,t.jsx)(n.br,{}),"\n","Verify that changing the discount rate now requires editing ",(0,t.jsx)(n.strong,{children:"one"})," place only."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-clean-code-tips",children:"\ud83e\uddf9 Clean Code Tips"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.strong,{children:"Extract\xa0Class / Extract\xa0Method"})," to eliminate God\xa0Classes and large methods."]}),"\n",(0,t.jsxs)(n.li,{children:["Centralize business rules with ",(0,t.jsx)(n.strong,{children:"Strategy or Policy"})," to avoid Shotgun\xa0Surgery."]}),"\n",(0,t.jsxs)(n.li,{children:["Replace magic numbers or strings with ",(0,t.jsx)(n.strong,{children:"named constants or enums"}),"\u2014your future self will thank you."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var r=s(6540);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);